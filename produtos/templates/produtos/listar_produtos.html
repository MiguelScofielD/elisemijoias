{% extends "base.html" %}
{% block title %}Estoque{% endblock %}

{% block content %}
<h1>Estoque de Produtos</h1>

<form method="get" class="row mb-4">
    <div class="col-md-4">
        <input
            type="text"
            name="q"
            value="{{ busca }}"
            class="form-control"
            placeholder="Buscar por nome ou código de barras"
            autofocus
        >
    </div>
    <div class="col-md-2">
        <button class="btn btn-outline-secondary">
            Buscar
        </button>
    </div>
</form>

<div class="row">
{% for produto in produtos %}
    <div class="col-md-3">
        <div class="card mb-4">

            {% if produto.imagem %}
            <img src="{{ produto.imagem.url }}" class="card-img-top">
            {% endif %}

            <div class="card-body">
                <h6>{{ produto.nome }}</h6>
                <p class="mb-1">R$ {{ produto.preco }}</p>
                <p class="mb-1">Estoque: {{ produto.estoque }}</p>
                <small>Cód.: {{ produto.codigo_barras }}</small>
            </div>

        </div>
    </div>
{% empty %}
    <div class="col-12">
        <div class="alert alert-warning">
            Nenhum produto encontrado para a busca.
        </div>
    </div>
{% endfor %}
</div>
{% endblock %}
