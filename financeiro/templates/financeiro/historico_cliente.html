{% extends "base.html" %}
{% block title %}Histórico Financeiro{% endblock %}

{% block content %}
<h1>Histórico Financeiro — {{ cliente.nome }}</h1>

{% for conta in contas %}
<div class="card mb-3 p-3">

    <div class="row">
        <div class="col-md-4">
            <strong>Venda:</strong> #{{ conta.venda.id }}
        </div>
        <div class="col-md-4">
            <strong>Valor total:</strong> R$ {{ conta.valor }}
        </div>
        <div class="col-md-4">
            <strong>Saldo devedor:</strong> R$ {{ conta.saldo }}
        </div>
    </div>

    <hr>

    <h6>Pagamentos</h6>

    {% if conta.pagamentos.all %}
        <ul>
            {% for pagamento in conta.pagamentos.all %}
                <li>
                    {{ pagamento.data|date:"d/m/Y H:i" }} — R$ {{ pagamento.valor }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Nenhum pagamento registrado.</p>
    {% endif %}

</div>
{% empty %}
<p>Nenhuma conta encontrada para este cliente.</p>
{% endfor %}
{% endblock %}
